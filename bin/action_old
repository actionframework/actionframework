#!/usr/bin/env ruby

######### THIS FILE IS OLD, NOT MAINTAINED AND NOT SUPPORTED ANYMORE ############
if(ARGV[0].nil? || ARGV[0] != "oldproject_creation")
	puts "Usage: action_old oldproject_creation #{projectname}"
	puts "WARNING: this is old code and isn't updated anymore, so don't use this anymore"
else 
		projectname = ARGV[1]
	    Dir.mkdir("#{projectname}/controllers")
		Dir.mkdir("#{projectname}/models")
		Dir.mkdir("#{projectname}/views")
		Dir.mkdir("#{projectname}/config")
		Dir.mkdir("#{projectname}/static")
		Dir.mkdir("#{projectname}/initializers")
		FileUtils.touch("#{projectname}/views/layout.html.erb")
		FileUtils.touch("#{projectname}/Gemfile")
		FileUtils.touch("#{projectname}/config/auth.rb")
		File.write("#{projectname}/main.rb","# Example of basic configuration\nActionFramework = ActionFramework::Server.new\n\nnActionFramework.autoimport\nActionFramework.start")
		File.write("#{projectname}/controllers/default_controller.rb","class DefaultController < ActionFramework::Controller
\n	def index\n		erb \"index\" \n    end\nend");
		File.write("#{projectname}/routes.json","{\n \"get\": [{\n    \"/\": \"DefaultController#index\"\n}]\n}")
		File.write("#{projectname}/config/routes.rb","ActionFramework::Server.current.routes do\n\n	get \"/\" => \"DefaultController#index\"\n\nend")
		File.write("#{projectname}/config/settings.rb","ActionFramework::Server.current.settings do |s|\n\nend")
		File.write("#{projectname}/Gemfile","source 'https://rubygems.org'\n\ngem 'actionframework'")
		File.write("#{projectname}/config.ru","require 'actionframework'\n\nrun ActionFramework::Base.new")
		File.write("#{projectname}/config/plugables.rb","# Feature under development")
		File.write("#{projectname}/views/layout.html.erb",File.read(ActionFramework::Gem.root.resources.templates("layout.html.erb").to_s))
		File.write("#{projectname}/views/index.html.erb",File.read(ActionFramework::Gem.root.resources.templates("index.html.erb").to_s))		
		File.write("#{projectname}/config/auth.rb",File.read(ActionFramework::Gem.root.resources.config("auth.rb").to_s))
end